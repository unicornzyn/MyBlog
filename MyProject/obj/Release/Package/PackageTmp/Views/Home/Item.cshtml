@model MyProject.Models.Article

<h2>@Model.title</h2>
<small style="padding-left:120px;">@Common.St.GetDateTimeString(Model.addtime)</small>
<div>
    @Html.Raw(Model.contenthtml)
</div>
<div>
    <h2><a href="#divreply">发表评论</a></h2>
    <div id="divReview">

    </div>
    <div>
        <a name="divreply" id="divreply"></a>
        <p>昵称：<input id="txtNick" value="游客" /></p>
        <p>内容：<textarea id="txtContent" cols="60" rows="5" style="vertical-align:top;"></textarea></p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input value="提交评论" type="button" id="btnSubmit" /></p>
    </div>
</div>
<script type="text/javascript" language="javascript">
    $(function () {
        var id=@Model.id;
        $("#btnSubmit").click( function () {
            var nick = $("#txtNick").val();
            var content = $("#txtContent").val();
            if ($.trim(nick) == "" || $.trim(content) == "") { return; }
            $.post("/Home/SaveReply", {id:id,nick:nick,content:content},function(data){$("#txtContent").val("");bind();});
        });
        bind();
        function bind() {
            $.getJSON("/Home/GetReply",{id:id},function(data){
                $("#divReview").html("");
                $.map(data,function(n,i){
                   $("#divReview").append("<p>#"+(i+1)+"楼&nbsp;["+n.Nick+"]&nbsp;&nbsp;"+n.AddTime+"<br />"+converter.makeHtml(n.Content)+"</p>");
                });
            });
        }
    });
</script>